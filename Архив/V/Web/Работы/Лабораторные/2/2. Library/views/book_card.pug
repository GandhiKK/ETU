doctype html
html
    head
        meta(charset="utf-8")
        //link(href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet")
        link(href="../css/style.css" rel="stylesheet")
        link(href="../css/book_card.css"  rel="stylesheet")
        link(href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet")
        
        script(src="../js/xhr.js")


        title= book.name
    body
        #header_btn
            a(href="/add_user")
                button() Новый пользователь
            a(href="/add_book") 
                button() Новая книга
            a(href="/") 
                button() Список книг

        #book_card.card
            h1= book.name
            table
                tr
                    th Автор:
                    th #{book.author}
                tr
                    th Год выпуска:
                    th #{book.release_date}
                tr
                    th ID Книги:
                    th #{book.id}
                tr
                    th Краткое описание:
                    th #{book.info}
            if book.available
                h3
                    span(style="color: green ") В наличии
            else
                table
                    tr
                        th У читателя до
                        th #{new Date(book.return_date).toDateString()}
                    tr
                        th ID читателя:
                        th
                            p(id="user" onclick=`user(${book.reader_id})`)!= book.reader_id

        #buttons
            button(id="change_btn") Изменить

            if book.available 
                button(id="give_btn") Выдать
            else
                form(method="POST" action="/book_card/return/" + book.id)
                    button(id="return_btn") Вернуть
                button(id="extend_btn") Продлить

        #book_change
            form(method="POST" action="/book_card/" + book.id)
                table
                    tr
                        th Название:
                        th
                            input(name="name" value= book.name)
                    tr
                        th Автор:
                        th
                            input(name="author" value= book.author)
                    tr
                        th Год выпуска:
                        th
                            input(type="number" oninput="isValidate(this)" name="release_date" value= book.release_date)
                    tr
                        th Краткое описание:
                        th
                            input( name="info" value= book.info)

                button(type="submit") Сохранить изменения

        #book_give
            form(method="POST" action="/book_card/" + book.id)
                table
                    tr
                        th Количество дней:
                        th
                            input(name="days" type="number", min="1", required)
                br
                th Читатель:
                - for (var i = 0; i < storage.users.length; i++)
                    p
                        input(type="radio" name="user_id" value= storage.users[i].id required)
                        span= storage.users[i].name
                button(type="submit") Выдать

        #book_extend
            form(method="POST" action="/book_card/" + book.id)
                input(name="extend_days" value= 15)
                button(type="submit") Продлить
        script(src="../js/book_card.js")



